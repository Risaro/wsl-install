@echo off
chcp 65001 >nul
:: =============================================
:: Ð—ÐÐŸÐ£Ð¡ÐšÐÐ¢ÐžÐ  WSL Ð£Ð¡Ð¢ÐÐÐžÐ’ÐšÐ˜
:: ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ PowerShell-ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¾Ñ‚ Ð¸Ð¼ÐµÐ½Ð¸ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°
:: =============================================
 


:: ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð½Ð° Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°
net session >nul 2>&1
if %errorLevel% neq 0 (
    echo.
    echo ðŸ›‘ Ð¢Ñ€ÐµÐ±ÑƒÑŽÑ‚ÑÑ Ð¿Ñ€Ð°Ð²Ð° ÐÐ´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°!
    echo    Ð©Ñ‘Ð»ÐºÐ½Ð¸Ñ‚Ðµ Ð¿Ñ€Ð°Ð²Ð¾Ð¹ ÐºÐ½Ð¾Ð¿ÐºÐ¾Ð¹ â†’ "Ð—Ð°Ð¿ÑƒÑÐº Ð¾Ñ‚ Ð¸Ð¼ÐµÐ½Ð¸ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°"
    echo.
    pause
    exit /b
)

:: ÐŸÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð¿Ð°Ð¿ÐºÑƒ ÑÐ¾ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð¼
cd /d "%~dp0"

:: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚ Ð»Ð¸ setup-wsl.ps1
if not exist "setup-wsl.ps1" (
    echo.
    echo ðŸ› ï¸  Ð¤Ð°Ð¹Ð» setup-wsl.ps1 Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ Ð² ÑÑ‚Ð¾Ð¹ Ð¿Ð°Ð¿ÐºÐµ!
    echo    Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð¾Ð½ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ñ€ÑÐ´Ð¾Ð¼ Ñ launch.bat
    echo.
    pause
    exit /b
)

:: Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ PowerShell-ÑÐºÑ€Ð¸Ð¿Ñ‚
echo ðŸš€ Ð—Ð°Ð¿ÑƒÑÐº setup-wsl.ps1...
%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\powershell.exe  -ExecutionPolicy Bypass -NoProfile -File "setup-wsl.ps1"

echo.
echo ðŸŽ‰ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð»ÑŽÐ±ÑƒÑŽ ÐºÐ»Ð°Ð²Ð¸ÑˆÑƒ...
pause >nul